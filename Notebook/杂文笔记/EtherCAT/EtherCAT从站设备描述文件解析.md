# EtherCAT从站设备描述文件解析

此文为EtherCAT的从站设备描述文件的解析。

文件架构分为以下部分：

``` xml
<?xml version="1.0" encoding="utf-8"?>
<EtherCATInfo xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="EtherCATInfo.xsd" Version="1.6">
    <Vendor>
        <Id>#x9</Id>
        <Name LcId="1033">ACTI</Name>
        <ImageData16x14>424DD6020000000000003600000028000000100000000E000000010018000000000000000000C30E0000C30E00000000000000000000FFFFFFFFE4DFFC6045FE9F90FEA091FC5B43FC5C3CFC5337FD7B65FEBBAEFC5542FECCC3FFEBE7FC5C43FE9D8CFFFFFFFFFFFFFFDDD5FB1F00FD7C65FD7C65FB1900FB421DFB3E22FC6C55FDA593FB0D00FEBBAFFFE6E2FB1A00FD785EFFFFFFFFFFFFFFDED7FB2A01FD826CFD7D66FB2D05FFDED7FFFAF8FFFBF9FDAF9EFB1500FEBEB2FFE7E3FB2500FD7E65FFFFFFFFFFFFFFDED7FB2A01FD826CFD7D66FB2C04FFE5DFFFFFFFFFFFFFFDB09FFB1500FEBEB2FFE7E3FB2500FD7E65FFFFFFFFFFFFFFDED7FB2A01FD826CFD7D66FB2C04FFEAE4FFFFFFFFFFFFFDB09FFB1500FEBEB2FFE5E1FB1700FD765EFFFFFFFFFFFFFFDED7FB2A01FD826CFD7E66FB2D04FEC5B9FED9D2FEE2DDFDAD9CFB1600FEB9ADFFF3F1FD8B78FEB7AAFFFEFEFFFFFFFFDED7FB2A01FD836DFD7A64FB1700FB2F07FB2405FC5A42FDAE9CFB1800FEC0B5FFF7F6FD6B57FEA89AFFFFFFFFFFFFFFDED7FB2A01FD7D66FDB3A7FC6951FC5F40FC5B3FFD7D67FD9B86FB1C00FDAA9AFFD2CAFC5035FD8B78FFFBF9FFFFFFFFDED7FB2900FC765EFFFFFFFEAEA1FB280EFB3912FB3F1AFB380CFB2A00FB2800FB2D04FB310FFB4323FFE9E3FFFFFFFFDED7FB2900FC775FFFFFFFFEBFB5FC6A55FD7E67FC4923FB1E00FB360FFC735AFC735AFC6F57FC7E68FFEFEBFFFFFFFFDED7FB2800FC7C65FFFFFFFFFFFFFFFFFFFEC2B7FB3213FB290AFEB8ACFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFDED7FB2E04FC5A3CFDAE9FFDAD9EFD9B88FB2C07FB2707FEBAACFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFDDD7FB2F09FB1C00FB1800FB1800FB1600FB2000FEB1A2FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEEEBFEB7ABFEB6A8FEB7AAFEB7AAFEB6A8FEBAADFFF8F7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</ImageData16x14>
    </Vendor>
    <Descriptions>
        ...
    </Descriptions>
</EtherCATInfo>
```
上面xml文本内容中，可以看到主要有`Vendor`也就是供应商信息，以及`Descriptions`设备描述组成，这里设备描述暂时省略了，下面会详细讲解。这里先看供应商内容，ID为供应商的ID号，Name为供应商的名称，ImageData16x14为供应商的logo图片内容。LcId="1033"表示通用英文语言，中文语言格式为2052，即用LcId="2052"表示。

``` xml
<Groups>
    <Group SortOrder="0">
        <Type>ECAT-EVB</Type>
        <Name LcId="1031">ECAT-EVB</Name>
        <Name LcId="1033">ECAT-EVB</Name>
        <ImageData16x14>424DD6020000000000003600000028000000100000000E000000010018000000000000000000C30E0000C30E00000000000000000000FFFFFFFFE4DFFC6045FE9F90FEA091FC5B43FC5C3CFC5337FD7B65FEBBAEFC5542FECCC3FFEBE7FC5C43FE9D8CFFFFFFFFFFFFFFDDD5FB1F00FD7C65FD7C65FB1900FB421DFB3E22FC6C55FDA593FB0D00FEBBAFFFE6E2FB1A00FD785EFFFFFFFFFFFFFFDED7FB2A01FD826CFD7D66FB2D05FFDED7FFFAF8FFFBF9FDAF9EFB1500FEBEB2FFE7E3FB2500FD7E65FFFFFFFFFFFFFFDED7FB2A01FD826CFD7D66FB2C04FFE5DFFFFFFFFFFFFFFDB09FFB1500FEBEB2FFE7E3FB2500FD7E65FFFFFFFFFFFFFFDED7FB2A01FD826CFD7D66FB2C04FFEAE4FFFFFFFFFFFFFDB09FFB1500FEBEB2FFE5E1FB1700FD765EFFFFFFFFFFFFFFDED7FB2A01FD826CFD7E66FB2D04FEC5B9FED9D2FEE2DDFDAD9CFB1600FEB9ADFFF3F1FD8B78FEB7AAFFFEFEFFFFFFFFDED7FB2A01FD836DFD7A64FB1700FB2F07FB2405FC5A42FDAE9CFB1800FEC0B5FFF7F6FD6B57FEA89AFFFFFFFFFFFFFFDED7FB2A01FD7D66FDB3A7FC6951FC5F40FC5B3FFD7D67FD9B86FB1C00FDAA9AFFD2CAFC5035FD8B78FFFBF9FFFFFFFFDED7FB2900FC765EFFFFFFFEAEA1FB280EFB3912FB3F1AFB380CFB2A00FB2800FB2D04FB310FFB4323FFE9E3FFFFFFFFDED7FB2900FC775FFFFFFFFEBFB5FC6A55FD7E67FC4923FB1E00FB360FFC735AFC735AFC6F57FC7E68FFEFEBFFFFFFFFDED7FB2800FC7C65FFFFFFFFFFFFFFFFFFFEC2B7FB3213FB290AFEB8ACFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFDED7FB2E04FC5A3CFDAE9FFDAD9EFD9B88FB2C07FB2707FEBAACFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFDDD7FB2F09FB1C00FB1800FB1800FB1600FB2000FEB1A2FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEEEBFEB7ABFEB6A8FEB7AAFEB7AAFEB6A8FEBAADFFF8F7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</ImageData16x14>
    </Group>
</Groups>
<Devices>
    <Device Physics="YY">
        <Type ProductCode="#x00009252" RevisionNo="#x1">Kstopd-8I8OS</Type>
        <Name LcId="1033">Kstopd-8I8OS</Name>
        <Name LcId="1031">Kstopd-8I8OS</Name>
        <Info>
            ...
        </Info>
        <GroupType>ECAT-EVB</GroupType>
        <Profile>
            ...
        </Profile>
        <Fmmu>Outputs</Fmmu>
        <Fmmu>Inputs</Fmmu>
        <Fmmu>MBoxState</Fmmu>
        <Sm MinSize="34" MaxSize="128" DefaultSize="128" StartAddress="#x1000" ControlByte="#x26" Enable="1">MBoxOut</Sm>
        <Sm MinSize="34" MaxSize="128" DefaultSize="128" StartAddress="#x1080" ControlByte="#x22" Enable="1">MBoxIn</Sm>
        <Sm DefaultSize="2" StartAddress="#x1100" ControlByte="#x64" Enable="1">Outputs</Sm>
        <Sm DefaultSize="6" StartAddress="#x1400" ControlByte="#x20" Enable="1">Inputs</Sm>
        <RxPdo Mandatory="true" Fixed="true" Sm="2">
            ...
        </RxPdo>
        <TxPdo Mandatory="true" Fixed="true" Sm="3">
            ...
        </TxPdo>
        <Mailbox DataLinkLayer="true">
            ...
        </Mailbox>
        <Dc>
            ...
        </Dc>
        <Eeprom>
            ...
        </Eeprom>
        <ImageData16x14>424DD6020000000000003600000028000000100000000E000000010018000000000000000000C30E0000C30E00000000000000000000FFFFFFFFE4DFFC6045FE9F90FEA091FC5B43FC5C3CFC5337FD7B65FEBBAEFC5542FECCC3FFEBE7FC5C43FE9D8CFFFFFFFFFFFFFFDDD5FB1F00FD7C65FD7C65FB1900FB421DFB3E22FC6C55FDA593FB0D00FEBBAFFFE6E2FB1A00FD785EFFFFFFFFFFFFFFDED7FB2A01FD826CFD7D66FB2D05FFDED7FFFAF8FFFBF9FDAF9EFB1500FEBEB2FFE7E3FB2500FD7E65FFFFFFFFFFFFFFDED7FB2A01FD826CFD7D66FB2C04FFE5DFFFFFFFFFFFFFFDB09FFB1500FEBEB2FFE7E3FB2500FD7E65FFFFFFFFFFFFFFDED7FB2A01FD826CFD7D66FB2C04FFEAE4FFFFFFFFFFFFFDB09FFB1500FEBEB2FFE5E1FB1700FD765EFFFFFFFFFFFFFFDED7FB2A01FD826CFD7E66FB2D04FEC5B9FED9D2FEE2DDFDAD9CFB1600FEB9ADFFF3F1FD8B78FEB7AAFFFEFEFFFFFFFFDED7FB2A01FD836DFD7A64FB1700FB2F07FB2405FC5A42FDAE9CFB1800FEC0B5FFF7F6FD6B57FEA89AFFFFFFFFFFFFFFDED7FB2A01FD7D66FDB3A7FC6951FC5F40FC5B3FFD7D67FD9B86FB1C00FDAA9AFFD2CAFC5035FD8B78FFFBF9FFFFFFFFDED7FB2900FC765EFFFFFFFEAEA1FB280EFB3912FB3F1AFB380CFB2A00FB2800FB2D04FB310FFB4323FFE9E3FFFFFFFFDED7FB2900FC775FFFFFFFFEBFB5FC6A55FD7E67FC4923FB1E00FB360FFC735AFC735AFC6F57FC7E68FFEFEBFFFFFFFFDED7FB2800FC7C65FFFFFFFFFFFFFFFFFFFEC2B7FB3213FB290AFEB8ACFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFDED7FB2E04FC5A3CFDAE9FFDAD9EFD9B88FB2C07FB2707FEBAACFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFDDD7FB2F09FB1C00FB1800FB1800FB1600FB2000FEB1A2FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEEEBFEB7ABFEB6A8FEB7AAFEB7AAFEB6A8FEBAADFFF8F7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</ImageData16x14>
    </Device>
</Devices>
```

Physics中定义了设备的接口类型，当使用MII接口0和接口1时，Physics定义为YY，


